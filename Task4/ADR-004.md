# ADR-004: Задание 4. Проработка критериев выбора решения
## Автор: Сурков Александр
## Дата: 23.07.2025
## 1. Контекст
Компания «АгроТех Х» давно работает на рынке, занимается выращиванием различных культур, имеет 150 тепличных комплексов по всей стране и занимается свиноводством. У компании есть свой собственный парк техники.

IT-ландшафт компании формировался постепенно, и там можно встретить как достаточно современные, так и совсем устаревшие технологии, от которых постепенно отказываются.

По мере развития IoT компания пробует различные датчики и системы в своей работе. Например, для парка техники внедрён мониторинг местоположения, состояния, расхода топлива, выполнения работ множества единиц техники (тракторы, комбайны, опрыскиватели) разных производителей для планирования заданий, сокращения издержек и повышения производительности.

Сейчас перед компанией стоит задача — повысить эффективность в сфере животноводства и по максимуму автоматизировать процессы, связанные с кормлением, безопасностью и мониторингом поголовья скота.

На рынке уже представлены продукты из этой сферы: это [PigVision](https://agrovision.com/uk/software/pigs/pigvision/), [ALUS](https://alus.ca/alus_news_and_events/aw-canada-cargill-build-nature-based-solutions-with-alus/) или [PigTales](https://www.boehringer-ingelheim.com/ca/animal-health/livestock/swine), есть различные исследования и проекты: https://blog.iotcloudplatform.com/how-to-design-an-iot-smart-pig-farming-system/ . Но купить и адаптировать их в настоящих реалиях не получится либо из-за ограничений в законодательстве, либо из-за дороговизны реализации. Например, использование дронов для мониторинга скота.

Поэтому решено сделать MVP архитектуры c нуля и запустить как отдельную платформу для мониторинга скота. Сначала планируется реализовать это на ограниченном количестве ферм, а затем потенциально предлагать как SaaS-решение для других компаний — это уже выходит за рамки проектной работы.

Этот ADR подводит итоги на основе предыдущих ADR:
- [ADR-001: Задание 1. Разработка вариантов решений](https://github.com/SurkovAleksandr/MSA-AgroTech-sprint-1/blob/master/Task1/ADR-001.md)
- [ADR-002: Задание 2. Проработка высокоуровневого видения решений](https://github.com/SurkovAleksandr/MSA-AgroTech-sprint-1/blob/master/Task2/ADR-002.md)
- [ADR-003: Задание 3. Детализация решений](https://github.com/SurkovAleksandr/MSA-AgroTech-sprint-1/blob/master/Task3/ADR-003.md)

## 2. Требования
Критерии для выявления подходящего решения:
- решение должно удовлетворять требованиям
- на каждом уровне абстракции принимаются свои решения. Эти решения должны облегчать реализацию на ниже лежащих уровнях
- при выборе между решениями должен находиться компромисс между стоимостью и функционалом

## 3. Решение
Чтобы принять окончательное решение, будем принимать решения на каждом этапе проектирования и с учетом выше описанных критериев:
- верхнеуровневое решение(контекст)
  Чтобы удешевить систему и удовлетворить требованию доступности системы 99,95% будем осуществлять нотификацию в рамках агентов.
  Это связано с тем, что сетевое соединение между агентом и центральной системой не удовлетворяет доступности 99,95%
- уровень контейнеров
  Для сбора метрик выбираем специализированное решение EMQX. Это связано с тем, что оно больше подходит под большой поток событий
  и является более подходящим под задачи IoT. Возможно в дальнейшем можно будет перевести все IoT системы на этот стек.
- уровень компонентов
  Решение удовлетворяет функциональным и не функциональным требованиям. Был выбран один компонет для получения и анализа событий.
  Тем самым мы уменьшили количество компонентов и измежали интеграцию между ними.


## 4. Альтернативы
Возможные варианты для разработки первоначального MVP:
- ограничить количество датчиков. Например, не ставить на всех свиней
- ограничить типы датчиков. Например, использовать только RFID-метки и не использовать:
  - RFID-чипы - Имплантируемые чипы
  - RFID-считыватели - Фиксация проходов, кормления, сбора данных
  - системы сбора и анализа данных - Централизованное управление стадом, мониторинг здоровья и продуктивности
- не использовать системы автоматической настройки окружающей среды:
  - вентиляция
  - отопление
  - влажность
- не разрабатывать системы мониторинга здоровья свиней
- не разрабатывать систему мониторинга окружающей среды
- не разрабатывать системы анализа и прогнозирования на центральном сервере
- не разрабатывать системы использования ресурсов: вода, электричество, корм
  Как результат это позволит уменьшить количество необходимого оборудования и разрабатываемых программных модулей.

## 5. Недостатки, ограничения, риски



-------------------
